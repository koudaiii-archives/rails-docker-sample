sudo: required
language: ruby
rvm:
  - 2.3.1
services:
  - docker
env:
  matrix:
  - REPO=koudaiii/rails-docker-sample
  - COMMIT=${TRAVIS_COMMIT::8}
  - TAG=${COMMIT}
  global:
  - secure: nx0M37c9H9C6ayMSmdKKK8wO+Mvublj7t4fyjHd3BgYGhIduN/XRXeUnr2QinjBimKjHvtH0KjgULDpsLC520zCe65od/isDxsPP9doP+g1jd1paYg/QzZ3XLIsKF2pKjaVguo4K0qNi+iJ/i+lSvO2ADAcT1xfjCjxFaRDTXXH7fHcNiXF0QzD9LDwdDE8XHYMGFdCkwueQcrm1MhOjdddfaFbQK5BLF/o/lLK1I3x7iz9yGNm7Zt+AxzkRFSYWaI1PKKtGkPmzesn7YMPkCZ91Fqs0S/6TYqCUDJ0pJ0XebDz+vZxyMzgMwaIMaFeOXVyRVZLkPNLt37MfAXQZuc1a2sriFGucHIYy6zRmjJQwDxxFoUVPPeP3JTzLVLJvNcMMlrJcL0PeKo7B7JKh6gj/Z8pVPYUSupj+rN2dnH6RPuSiOqb07jeervTXeOosCgFxkQQA+YzK1w4oLbHwVFQW/kXpN0pvI7hE/w4D31sUnZoQazQrrHeGEmyI5lEM0HfjftDW6jXcTs8GLBD/5e85hN3KSPo2mOBHUi7eqMSzx5+4S3wKwEwliW+QwvssdVsIwpoCyw3255LFNR1FqUEPdzfaISIz6nUgFgHOg/MR5wZJpaaFkPWUuZeDYnSa7y5qJ+6vdHuyi7oEkvaTLoUExDpnSHVMd5jl2VrSl58=
  - secure: hzeWuGnluZLDZUo0NLBHsHgqyYAsqipEaVx0NQ3Q8fqKEVfy+Qr4O0Tef5B9dptWldUag3Umn7WZLCTXNwNrnSR1i2ccThwjEeYGzUAOeZwQG8hN7vY69IdfPrZVIu7ywA7UfVBK2M7PDzeLNGeyMb0fDzn27C7MnWsC78GdkecQ7SepFJG+3Ecp9g5HbDxGdFZpt3lwNCotGMDb0eH1na9EPFeJWI62JFz3HR8bryxMRtPLaj5FlfIVJW8Q3OixQSslw35RRpT7+0Pl59Hs/ps9H3KIn3m5YyfjMGVENuic1dEkOTo/U+4/MQuQEWN+tGd7WhUdnGU91Yv7LYaF5wYhlLqGSzZU4eWRcY+4NbAOAmVAdMw6QdrrTey3jY/u8RXzq/6J5ehSth340mVWONAaKwfyxEjl0rdfdVDN2ARP2XQbA0KT3SlxMUl6e7XM2UYejhrw/jFLZ7f+yGx38vXftHcmXIzby1YTVsHQYHK/sVNbxRVoxfk/ezu4Y/1/sWVCsB97cWRBAn0Lc++eNn0mr9kworFo26T685XXQY22Q4+ROLIzzXdecYmI4YNhcjDicUaKW6/IPt6mYqf210EsBfWQtScStIg7FrzZnxaFkRH8vf31z8NE+gePjKSpBoRTT/L0LD/EzgkdbCChi6PVQIbZ71ljaM+6V7u/O1o=
  - secure: Y8xz5NYbYrTDmWCeSUNc+wR+op12adLSwudHtDyne2PyNb9YpYKZUO7QpZ8IR9JxuDdtikAURIKUUaKOOTvvEP/MbjGRHRBm5UuWWCywnmZZMiVJUkV7T+10E/9pfNqg3L21FzIFIQtIaLyaAlFOhHNMnaSuL68QMgE/ZCh5/LatmOk2bjAQOOQQGvIOJ87uPdExZ6/r/ss0jmnJ6y9ZevhDmbwDLoEJfWUIuhTX9UUBVmmDcGrO2c8Ywi4MMv07DTU71115roAGdh3As8BluirsDB03EBp6mixAaHFNn/pkVg8WyqBTmdbzQUgg+jXDFJdgRRpY7MtEsdf4HVTvRgtcL4m3vlJ0xG+LI6n8HnyFu1DuX9vcXPknE6b++0DKRKtgY3v7CUvoU8WLG4bo7woI7+602uaiijOGqf5ZjUhQbeXv2Zg1nwsVyQD+xVf7PSe0ogzzGL+fo95z0htcc8F14Hs2btzUVusG/GeHYdAK60tHSKR/bnpQ21zHZdetUEeE217src7mhMx+rx7ePQsqj8rAFvcSMvb6eYN+vGzpJZ3PrQjvS9cGd66HslF4kuKsg5KqqSuIMimv4a1HKVuuzcghO2DTUmYq3gA9LsSdt5hfbhh0zuY9yTtgxVWWY4/N2pj7MnVv6xScaU5pooNKjbhNXoEPZOzXppn2LGw=
before_install:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- docker build -t $REPO:$COMMIT .
- docker push $REPO:$COMMIT
