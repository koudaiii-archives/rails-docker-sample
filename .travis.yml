sudo: required
language: ruby
rvm:
- 2.3.1
services:
- docker
env:
  matrix:
  - REPO=koudaiii/rails-docker-sample
  - COMMIT=${TRAVIS_COMMIT::8}
  - TAG=${COMMIT}
  global:
  - secure: hzeWuGnluZLDZUo0NLBHsHgqyYAsqipEaVx0NQ3Q8fqKEVfy+Qr4O0Tef5B9dptWldUag3Umn7WZLCTXNwNrnSR1i2ccThwjEeYGzUAOeZwQG8hN7vY69IdfPrZVIu7ywA7UfVBK2M7PDzeLNGeyMb0fDzn27C7MnWsC78GdkecQ7SepFJG+3Ecp9g5HbDxGdFZpt3lwNCotGMDb0eH1na9EPFeJWI62JFz3HR8bryxMRtPLaj5FlfIVJW8Q3OixQSslw35RRpT7+0Pl59Hs/ps9H3KIn3m5YyfjMGVENuic1dEkOTo/U+4/MQuQEWN+tGd7WhUdnGU91Yv7LYaF5wYhlLqGSzZU4eWRcY+4NbAOAmVAdMw6QdrrTey3jY/u8RXzq/6J5ehSth340mVWONAaKwfyxEjl0rdfdVDN2ARP2XQbA0KT3SlxMUl6e7XM2UYejhrw/jFLZ7f+yGx38vXftHcmXIzby1YTVsHQYHK/sVNbxRVoxfk/ezu4Y/1/sWVCsB97cWRBAn0Lc++eNn0mr9kworFo26T685XXQY22Q4+ROLIzzXdecYmI4YNhcjDicUaKW6/IPt6mYqf210EsBfWQtScStIg7FrzZnxaFkRH8vf31z8NE+gePjKSpBoRTT/L0LD/EzgkdbCChi6PVQIbZ71ljaM+6V7u/O1o=
  - secure: Y8xz5NYbYrTDmWCeSUNc+wR+op12adLSwudHtDyne2PyNb9YpYKZUO7QpZ8IR9JxuDdtikAURIKUUaKOOTvvEP/MbjGRHRBm5UuWWCywnmZZMiVJUkV7T+10E/9pfNqg3L21FzIFIQtIaLyaAlFOhHNMnaSuL68QMgE/ZCh5/LatmOk2bjAQOOQQGvIOJ87uPdExZ6/r/ss0jmnJ6y9ZevhDmbwDLoEJfWUIuhTX9UUBVmmDcGrO2c8Ywi4MMv07DTU71115roAGdh3As8BluirsDB03EBp6mixAaHFNn/pkVg8WyqBTmdbzQUgg+jXDFJdgRRpY7MtEsdf4HVTvRgtcL4m3vlJ0xG+LI6n8HnyFu1DuX9vcXPknE6b++0DKRKtgY3v7CUvoU8WLG4bo7woI7+602uaiijOGqf5ZjUhQbeXv2Zg1nwsVyQD+xVf7PSe0ogzzGL+fo95z0htcc8F14Hs2btzUVusG/GeHYdAK60tHSKR/bnpQ21zHZdetUEeE217src7mhMx+rx7ePQsqj8rAFvcSMvb6eYN+vGzpJZ3PrQjvS9cGd66HslF4kuKsg5KqqSuIMimv4a1HKVuuzcghO2DTUmYq3gA9LsSdt5hfbhh0zuY9yTtgxVWWY4/N2pj7MnVv6xScaU5pooNKjbhNXoEPZOzXppn2LGw=
  - secure: oN3tTWYsWMyQxddg90bBIExB6OBG0i3K6YWf+WsqNKuCG+hLvZEQIHNyn4JsJxI3eUQNxBXkHj+wXLOULn8sxf1pnJTmC8KAik9h+UIyc9jrdKhb5JmX9jm0ZYADNiOY+ew6RfvPvfwUHgKb78NQma2WsktsVoHhkt6uZIDgRy7bOdrPstEEIYfOd5PrVHj1v6B2Aq0UFUK8eqrAKN7b7pAJBJwmfRQjalIseRkUNIDE+y9CSLd1Up+D5DEOiA+PP678wRJDKWBDRsIg4V92w0bX/7eklufcaIqqK5cdNPmkUY+4fPiQkcCOSmiEs+PUnhTa8jlVU7BnYGJQRV2dfAHVxfo1sawWa4NE5QtOWsGvb1wQ4VcCGx1aJMxDrOzy8wFXeIkw5if5o3THH3yUP9IMdlEY1t0nUzFDdgU6oz/R4q8JNqkDbGufTShG29P8vrLnpRsAGYYQwhyEsQcJbWBgtKofUH6BW9+ovo4nABgM9+eQvXfHXcnTkYG/TnQePnEEiB1LGr6QiDDxg36eMMqBkJFt+DY+PSOwL/3OVBFV7KvzaO7W8SUm72L6Lr9fHzUUDPqE+p+i2ZxrOCv55u2fZWQjVkAueOHjNxffIFI0VgWKjpmGAoluAEQZn/wsop3crPBN9PolJGloHcWH5OiiwVqupe2CoNew9tjttaE=
before_install:
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- docker build -t $REPO:$COMMIT .
- docker push $REPO:$COMMIT
